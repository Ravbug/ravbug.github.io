<head>
    <title>WebPhoto</title>
    <meta name="description" content="Non-destructive image editing using CSS filters">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
    <link id="favicon" rel="icon" href="https://avatars2.githubusercontent.com/u/22283943" type="image/x-icon">
    <link rel="stylesheet" type="text/css" href="../bootstrap.css">
    <link rel="stylesheet" type="text/css" href="../stylesheet.css">
</head>

<style>
    .view{
        display:grid;
        grid-template-columns:1fr 260px;
        width: 100%;
        height: calc(100% - 30px);
    }
    /* Portrait phone mode */
    @media only screen and (max-width: 700px) {
        .view{
            grid-template-columns: 1fr;
        }
        .controls{
            padding:100px;
        }
    }
    .main_view{
        display:grid;
        grid-template-rows: 50px 1fr;
        width:100%;
    }
    .controls{
        background-color:#CCC;
        padding:10px;
        overflow:scroll;
    }
    #render{
        overflow:scroll;
        background-color:#ababab;
        height:100%;
    }
    #image{
        object-fit:contain;
        overflow:hidden;
        max-height: 100%;
        vertical-align:middle;
        max-width:100%;
    }
    #clip-bounds{
        overflow:hidden;
    }
    .center {
        margin: 0;
        position: relative;
        top: 50%;
        left: 50%;
        -ms-transform: translate(-50%, -50%);
        transform: translate(-50%, -50%);
    }
    adjustment {
        display:grid;
        grid-template-columns: 1fr 60px;
    }
</style>

<style id="delbtns">
    #delbtn{
        display:none;
    }
    #orderbtngroup{
        display:unset;
    }
</style>

<div class=main-view>
    <div>
            <b>Image URL:</b><input id="img-url"><button onclick="loadurl()">Load</button>
            <button onmousedown="renderview.style.filter=''" onmouseup="render(this)">Show Original</button>
    </div>
    <div class=view>
        <div id="render">
            <img id=image class="center" src="https://wallpapercave.com/wp/YHSuCPt.jpg">
        </div>
        <div class=controls id="controlframe">
            <button onclick="addAdjustmentGroup()">Add Adjustment Group</button>
            <button onclick="toggleDelete(this)">Del</button>
        </div>
        
    </div>
    
</div>

<script src="webphoto.js"></script>
<script>
    let delmode = false;
    function loadurl(){
        let url = document.getElementById("img-url").value;
        document.getElementById("image").src=url;
    }
    function toggleDelete(btn){
        delmode = !delmode
        btn.innerHTML = delmode? "Done" : "Del";
        document.getElementById("delbtns").innerHTML = `
        #delbtn{
            display:${delmode? "unset" :"none"};
        }
        #orderbtngroup{
            display:${!delmode? "unset" :"none"};
        }
        `;
    }
    //start with one adustment group
    addAdjustmentGroup();
</script>