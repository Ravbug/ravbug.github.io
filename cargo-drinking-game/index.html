<html>
    <head>
        <title>The Cargo Drinking Game</title>
        <meta name="description" content="Your liver might be ok with this">
        <link id="favicon" rel="icon" href="cargo-logo.png" type="image/x-icon">
        <meta charset="UTF-8">

         <!-- Social embed image -->
        <meta property="og:image" content="https://ravbug.github.io/cargo-drinking-game/cargo-logo.png">
        <meta property="og:image:type" content="image/png">
        <meta property="og:image:width" content="306">
        <meta property="og:image:height" content="275">
        {HEADER_CONTENT}
    </head>
    <body>
        {JUMBOTRON}
        <div class="main">
            <p>
                <b>Welcome to the Cargo Drinking Game!</b> While not nearly as bad as NPM, rust projects still suffer from a degree of dependency-itis. 
                Because code written by strangers on the internet is guaranteed to be safe, secure, and performant, right?
            </p>
            <p>
                The rules of the game are very simple. 
                <ol>
                    <li>
                        Think of a trivial programming task. The more trivial, the better.
                    </li>
                    <li>
                        Think of a likely name for a rust crate that solves that task.
                    </li>
                    <li>
                        If a crate exists to solve that problem, check the following criteria:
                        <ol>
                            <li>
                                If the crate has less than 200kb of code, excluding dependencies, take 1 more shot.
                            </li>
                            <li>
                                If that crate has over 1,000 weekly downloads, and the above is satisfied, take 1 more shot.
                            </li>
                            <li>
                                If the crate satisfies any of the above and has more than 50 users, take 1 more shot.
                            </li>
                            <li>
                                If the crate has dependencies, take 1 shot for every additional crate, for each of the above criteria it satisfies.
                            </li>
                        </ol>
                    </li>
                   <li>
                       Tally up your score and drink up! (please don't actually drink)
                   </li>
                </ol>
            </p>
            <p>
                Use the search bar below to play!
            </p>
            <div class="input-group" style="min-width:200px;float:left;margin:auto">
                <input id="search" placeholder="Search crates.io..." onkeyup="checkKey(event)" class="form-control"></input>
                <button onclick="go()" class="btn btn-primary">Search!</button>
            </div>

            <br><br>
            <p>
                <button id="exportbtn" class="btn btn-success" style="display:none;" onclick="">Export full hierarchy</button>
            </p>
            <div id="output"></div>
            <p>
                <div class="breadcrumb">
                    <b>Be Responsible!!</b> Please do not actually drink 300 shots if you find some nuclear package.
                     I am not liable if you hurt anyone or damage anything playing this game. 
                </div>
                <div class="breadcrumb">
                    <b>Stuck?</b> It's possible that you have encountered a rate limit. Simply wait 1 minute, then without refreshing the page, 
                    rerun your search. This keeps the cache intact and will help the game complete the search.  
                </div>
            </p>
        </div>
    </body>
    <script>
        async function go(){
            document.getElementById('output').innerHTML = "Searching...";
            document.getElementById('output').innerHTML = await intoxicate(document.getElementById('search').value)
        }
        function checkKey(event){
            if(event.keyCode == 13){
                go();
            }
        }
    </script>
    <script src="game.js"></script>
    <script src="../statistics.js" url="https://bit.ly/2YoOXIr"></script> 
</html>